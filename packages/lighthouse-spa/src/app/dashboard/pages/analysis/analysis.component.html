<div class="pf-l-flex pf-m-column pf-m-nowrap pf-u-p-lg pf-u-h-100">
    <div class="pf-l-flex__item">
        <div class="pf-l-split">
            <div class="pf-l-split__item  pf-m-fill">
                <nav class="pf-c-breadcrumb" aria-label="breadcrumb">
                    <ol class="pf-c-breadcrumb__list">
                        <li class="pf-c-breadcrumb__item">
                            <span class="pf-c-breadcrumb__item-divider">
                                <i class="fas fa-angle-right" aria-hidden="true"></i>
                            </span>
                            <a routerLink="/" class="pf-c-breadcrumb__link">Home</a>
                        </li>
                        <li class="pf-c-breadcrumb__item">
                            <span class="pf-c-breadcrumb__item-divider">
                                <i class="fas fa-angle-right" aria-hidden="true"></i>
                            </span>
                            <span class="pf-c-breadcrumb__link pf-m-current" aria-current="page">
                                {{title}}
                            </span>
                        </li>
                    </ol>
                </nav>
            </div>
            <div class="pf-l-split__item pf-u-w-25">
                <div class="pf-c-search-input">
                    <div class="pf-c-search-input__bar">
                        <span class="pf-c-search-input__text">
                            <span class="pf-c-search-input__icon">
                                <i class="fas fa-search fa-fw" aria-hidden="true"></i>
                            </span>

                            <input class="pf-c-search-input__text-input" type="text" id="branch-search-form"
                                name="search-branch" type="search" placeholder="Find by branch"
                                (input)="onSearch($event)" [value]="search">
                        </span>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="pf-l-flex pf-m-grow pf-m-justify-content-center pf-m-align-items-center" *ngIf="isPageLoading">
        <app-loader title="Loading...">
        </app-loader>
    </div>
    <section *ngIf="!isPageLoading && apps.length === 0" class="pf-l-bullseye">
        <app-empty-state title="No branch found">
        </app-empty-state>
    </section>
    <ng-container *ngIf="!isPageLoading">
        <div class="pf-l-flex pf-m-grow pf-m-align-items-center pf-m-column pf-u-w-100 pf-u-py-md pf-m-space-items-2xl"
            infiniteScroll [infiniteScrollDistance]="2" [infiniteScrollThrottle]="50" (scrolled)="onScroll()"
            [fromRoot]="true" infiniteScrollContainer="main">
            <div id="apps-score-card" class="pf-l-flex pf-m-column pf-m-space-items-sm" *ngFor="let app of apps">
                <div class="pf-l-flex__item pf-l-flex pf-c-content">
                    <div class="capitialize pf-l-flex__item pf-u-font-size-lg pf-u-color-100">
                        {{app.branch}}
                    </div>
                    <div class="pf-l-flex__item pf-m-grow"></div>
                    <div class="pf-l-flex__item pf-u-font-size-sm pf-u-color-300">
                        Last Report generated at:{{" "}}{{ app.data[0].updatedAt|
                        date:"MMM dd, YY"}}
                    </div>
                </div>
                <div class="pf-l-flex__item">
                    <div class="pf-l-grid pf-m-gutter">
                        <div class="pf-l-grid__item pf-m-12-col pf-m-6-col-on-2xl  pf-c-card score-card">
                            <div class="pf-c-card__body">
                                <div
                                    class="pf-l-flex pf-m-nowrap pf-m-justify-content-space-around pf-m-space-items-xl">
                                    <div class="pf-l-flex__item score"
                                        *ngFor="let score of app.data[0].score | keyvalue">
                                        <app-outlined-pie-graph [score]="score.value"
                                            [name]="score.key | lHScoreLabelFormater">
                                        </app-outlined-pie-graph>
                                    </div>
                                </div>
                                <app-lhcard-legend></app-lhcard-legend>
                            </div>
                        </div>
                        <div class="pf-l-grid__item pf-m-12-col pf-m-6-col-on-2xl pf-c-card score-card">
                            <div class="pf-c-card__body">
                                <ngx-charts-line-chart [view]="[800, 350]" [scheme]="timelineColorSchema"
                                    [timeline]="true" [results]="app.data | timelineScoreFormater" [legend]="legend"
                                    [xAxis]="xAxis" [yAxis]="yAxis" [timeline]="timeline"
                                    [referenceLines]="referenceLines" [showRefLines]="showRefLines"
                                    [yScaleMax]='yScaleMax' [yScaleMin]='yScaleMin' [legendTitle]="legendTitle"
                                    [xAxisLabel]="xAxisLabel" [yAxisLabel]="yAxisLabel"
                                    [showXAxisLabel]="showXAxisLabel" [showYAxisLabel]="showYAxisLabel">
                                </ngx-charts-line-chart>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="pf-u-font-size-lg pf-m-text pf-u-text-align-center" *ngIf="isNextPageLoading">Loading more
            branches...</div>
    </ng-container>
</div>
