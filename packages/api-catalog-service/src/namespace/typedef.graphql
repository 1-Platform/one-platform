enum ApiCategory {
  REST
  GRAPHQL
}

type HeaderType {
  key: String
  value: String
}

input HeaderInput {
  key: String
  value: String
}

type NSEnvironmentType {
  name: String
  apiBasePath: String
}

input NSEnvironmentInput {
  name: String
  apiBasePath: String
}

type NamespaceType {
  id: ID
  name: String
  slug: String
  description: String
  category: ApiCategory
  tags: [String]
  owners: [ApiUserType]
  appUrl: String
  environments: [NSEnvironmentType]
  hash: String
  schemaEndpoint: String
  headers: [HeaderType]
  subscribers: [ApiUserType]
  lastCheckedOn: DateTime
  createdOn: DateTime
  createdBy: String
  updatedOn: DateTime
  updatedBy: String
}

input NamespaceInput {
  id: ID
  name: String!
  slug: String
  description: String
  category: ApiCategory!
  tags: [String]
  owners: [ApiUserInput]!
  appUrl: String
  environments: [NSEnvironmentInput]!
  schemaEndpoint: String!
  headers: [HeaderInput]
  subscribers: [ApiUserInput]
  lastCheckedOn: DateTime
  createdOn: DateTime
  createdBy: String
  updatedOn: DateTime
  updatedBy: String
}

type Query {
  """
  List all API namespaces
  """
  listNamespaces(limit: Int, offset: Int): [NamespaceType]
  """
  To get a particular namespace by id
  """
  getNamespaceById(id: ID!): NamespaceType
  """
  Fetch the API Schema
  """
  fetchAPISchema(category: ApiCategory, schemaEndpoint: String, headers:[HeaderInput]): String
}

type Mutation {
  """
  Create an API namespace record
  """
  createNamespace(payload: NamespaceInput!): NamespaceType
  """
  Update an API namespace record
  """
  updateNamespace(id: ID!, payload: NamespaceInput!): NamespaceType
  """
  Delete an API namespace record
  """
  deleteNamespace(id: ID!): NamespaceType
  """
  Add subscriber to the namespace environments
  """
  addNamespaceSubscriber(
    id: ID!
    payload: ApiUserInput!
  ): NamespaceType
  """
  Remove subscriber from namespace environments.
  """
  removeNamespaceSubscriber(
    id: ID!
    payload: ApiUserInput!
  ): NamespaceType
}
